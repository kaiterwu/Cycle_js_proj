!function(){"use strict";!function(){function e(e){return 60*parseInt(e.slice(0,2))*60+60*parseInt(e.slice(3,5))+parseInt(e.slice(6))}function t(e){let t=parseInt(e.slice(0,4)),n=parseInt(e.slice(5,7)),r=parseInt(e.slice(8));return 12===n?r:1===n?31+r:t%4==0?[31,60,91,121,152,182,213,244,274,305,336,366][n-2]+r+31:[31,59,90,120,151,181,212,243,273,304,334,365][n-2]+r+31}function n(e){let t=e.days[0].datetime;document.querySelector("#date").innerText=t}function r(e){let t=e.timezone.split("/"),n=e.resolvedAddress.split(",")[0],r=t[1].split("_").join(" "),o=e.resolvedAddress.split(",")[1]+"\n"+r+"\n"+n;document.querySelector("#location").append(o)}function o(t,n,r,o,s,c){const i=n,a=n,d=Math.min(i,a)/2-20,l=d3.select(c).append("svg").attr("width",i).attr("height",a).append("g").attr("transform",`translate(${i/2},${a/2})`);let u=e(t.currentConditions.datetime),p=e(t.currentConditions.sunrise),m=e(t.currentConditions.sunset);const f=86400;let y=function(e,t,n){return e>n?f-e+t:e<t?t-e:f-n+t}(u,p,m),x=function(e,t,n){return e>t&&e<n?n-e:0}(u,p,m),g=function(e,t,n){return e>t?e-t:e<n?f+e-t:void 0}(u,p,m);const h={elapse:g,day:x,night:y},b=d3.scaleOrdinal().range(["#000000","#ff0660","#416fec"]),S=d3.pie().value((e=>e[1])).sort(null),v=d3.arc().innerRadius(d-r).outerRadius(d),k=S(Object.entries(h));l.selectAll("path").data(k).join("path").transition().duration(2e3).attrTween("d",(function(e){let t=d3.interpolate(e.startAngle+.1,e.endAngle);return function(n){return e.endAngle=t(n),v(e)}})).style("fill",(e=>b(e.data[0]))).attr("stroke",s).style("stroke-width",o).style("opacity",1)}function s(t){let n=e(t.currentConditions.datetime),r=(e(t.currentConditions.sunrise),e(t.currentConditions.sunset));const s=document.querySelector(".astro-modal"),c=document.querySelector(".overlay"),i=document.querySelector("#sun-path>svg"),a=document.querySelector(".close-btn"),d=document.querySelector("#svg-container"),l=document.querySelector("#upper-text"),u=document.querySelector("#lower-text");i.addEventListener("click",(function(){s.classList.remove("hidden"),c.classList.remove("hidden")})),i.addEventListener("click",(function(){o(t,600,30,"5px","white","#svg-container"),function(e){const t=document.createElement("p"),o=document.createElement("h1"),s=document.createElement("p"),c=document.createElement("h1"),i=document.createElement("img");t.innerText="Sunrise was at",o.innerText=`${e.currentConditions.sunrise}`,o.style.color="black",o.style.border="5px solid #ff0660",o.style.borderRadius="20px",o.style.background="#ff0660",o.style.boxShadow="0px 0px 20px 20px #ff0660",o.style.textShadow="1px 1px 5px black",l.append(t),l.append(o),n>r?(s.innerText="Sunset was at",i.src="images/days/moon.png"):(s.innerText="Sunset is at",i.src="images/days/sun2.png"),c.innerText=`${e.currentConditions.sunset}`,c.style.color="#416fec",c.style.border="5px solid #416fec",c.style.borderRadius="20px",c.style.background="black",c.style.boxShadow="0px 0px 20px 20px #416fec",c.style.textShadow="1px 1px 10px #416fec",u.append(s),u.append(c),d.append(i)}(t)})),a.addEventListener("click",(function(){s.classList.add("hidden"),c.classList.add("hidden"),d.innerHTML="",l.innerHTML="",u.innerHTML=""}))}function c(e,n,r,o,s,c){const i=n,a=n,d=Math.min(i,a)/2-20,l=d3.select(c).append("svg").attr("width",i).attr("height",a).append("g").attr("transform",`translate(${i/2},${a/2})`);let u=t(e.days[0].datetime);parseInt(e.days[0].datetime.slice(0,4));const p={current:u,winter:function(e){return e>90?0:90-e}(u),spring:function(e){return e>182?0:e>90?182-e:92}(u),summer:function(e){return e>273?0:e>182?273-e:92}(u),fall:function(e){return e>273?365-e:91}(u)},m=d3.scaleOrdinal().range(["#000000","#99ffe6","#065535","#fff228","#f77c3f"]),f=d3.pie().value((e=>e[1])).sort(null),y=d3.arc().innerRadius(d-r).outerRadius(d),x=f(Object.entries(p));l.selectAll("path").data(x).join("path").transition().duration(2e3).attrTween("d",(function(e){let t=d3.interpolate(e.startAngle+.1,e.endAngle);return function(n){return e.endAngle=t(n),y(e)}})).style("fill",(e=>m(e.data[0]))).attr("stroke",s).style("stroke-width",o).style("opacity",1)}function i(e){const n=document.querySelector(".astro-modal"),r=document.querySelector(".overlay"),o=document.querySelector("#seasons>svg"),s=document.querySelector(".close-btn"),i=document.querySelector("#svg-container"),a=document.querySelector("#upper-text"),d=document.querySelector("#lower-text");o.addEventListener("click",(function(){n.classList.remove("hidden"),r.classList.remove("hidden")})),o.addEventListener("click",(function(){c(e,600,40,"5px","white","#svg-container"),function(e){const n=document.createElement("p"),r=document.createElement("h1"),o=document.createElement("p"),s=document.createElement("h1"),c=document.createElement("img");let l,u,p,m,f,y,x=t(e.days[0].datetime);x<=90?(l=x,u=90-x,p="Winter",m="Spring",c.src="images/seasons/winter.png"):x>90&&x<=181?(l=x-90,u=181-x,p="Spring",m="Summer",c.src="images/seasons/spring.png"):x>182&&x<=273?(l=x-182,u=273-x,p="Summer",m="Fall",c.src="images/seasons/summer.png"):(l=x-274,u=365-x,console.log(l),console.log(x),p="Fall",m="Winter",c.src="images/seasons/autumn.png"),n.innerText=`${l} day(s) into `,o.innerText=`${u} day(s) until`,r.innerText=`${p}`,s.innerText=`${m}`,"Winter"===p?(f="#99ffe6",y="#065535"):"Spring"===p?(f="#065535",y="#fff228"):"Summer"===p?(f="#fff228",y="#f77c3f"):(f="#f77c3f",y="#99ffe6"),r.style.color=f,r.style.border=`5px solid ${f}`,r.style.borderRadius="20px",r.style.background="black",r.style.boxShadow=`0px 0px 30px 10px ${f} `,r.style.padding="10px",r.style.textShadow=`1px 1px 5px ${f} `,s.style.border=`10px solid ${y}`,s.style.borderRadius="20px",s.style.background=y,s.style.color="black",s.style.boxShadow=`0px 0px 30px 10px ${y} `,s.style.padding="10px",s.style.textShadow="1px 1px 5px black ",c.style.width="350px",c.style.height="350px",a.append(n),a.append(r),d.append(o),d.append(s),i.append(c)}(e)})),s.addEventListener("click",(function(){n.classList.add("hidden"),r.classList.add("hidden"),i.innerHTML=""}))}function a(e,t,n,r,o){const s=t,c=t,i=Math.min(s,c)/2-20,a=d3.select(o).append("svg").attr("width",s).attr("height",c).append("g").attr("transform",`translate(${s/2},${c/2})`),d=d3.scaleOrdinal().range(function(e){let t=["#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"];const n=e.currentConditions.moonphase;return n<.125||1===n?t.splice(0,0,"#000000"):n>=.125&&n<.25?t.splice(1,0,"#000000"):n>=.25&&n<.375?t.splice(2,0,"#000000"):n>=.375&&n<.5?t.splice(3,0,"#000000"):n>=.5&&n<.625?t.splice(4,0,"#000000"):n>=.625&&n<.75?t.splice(5,0,"#000000"):n>=.75&&n<.875?t.splice(6,0,"#000000"):n>=.875&&n<1?t.splice(7,0,"#000000"):t.splice(0,0,"#000000"),t}(e)),l=d3.pie().value((e=>e[1])).sort(null),u=d3.arc().innerRadius(i-80).outerRadius(i),p=l(Object.entries({"🌑":8,"🌒":8,"🌓":8,"🌔":8,"🌕":8,"🌖":8,"🌗":8,"🌘":8}));a.selectAll("slice").data(p).join("path").attr("d",u).transition().delay((function(e,t){return t/8*1e3})).duration(1e3).style("fill",(e=>d(e.data[0]))).attr("stroke",r).style("stroke-width",n).style("opacity",1),a.selectAll("slices").data(p).join("text").text((function(e){return e.data[0]})).transition().duration(2e3).attr("transform",(function(e){return`translate(${u.centroid(e)})`})).style("text-anchor","middle")}function d(e){const t=document.querySelector(".astro-modal"),n=document.querySelector(".overlay"),r=document.querySelector("#moons>svg"),o=document.querySelector(".close-btn"),s=document.querySelector("#svg-container"),c=document.querySelector("#upper-text"),i=document.querySelector("#lower-text"),d=document.querySelector(".moon_background");r.addEventListener("click",(function(){t.classList.remove("hidden"),n.classList.remove("hidden"),d.classList.remove("hidden")})),r.addEventListener("click",(function(){a(e,600,"30px","black","#svg-container"),function(e){const t=document.createElement("p"),n=document.createElement("h1"),r=document.createElement("p"),o=document.createElement("h1"),a=document.createElement("img"),d=["New","Waxing Crescent","First Quarter","Waxing Gibbous","Full","Waning Gibbous","Last Quarter","Waning Crescent"],l=function(e){const t=e.currentConditions.moonphase;let n;return n=t<.125||1===t?"New":t>=.125&&t<.25?"Waxing Crescent":t>=.25&&t<.375?"First Quarter":t>=.375&&t<.5?"Waxing Gibbous":t>=.5&&t<.625?"Full":t>=.625&&t<.75?"Waning Gibbous":t>=.75&&t<.875?"Last Quarter":t>=.875&&t<1?"Waning Crescent":"New",n}(e);t.innerText="Current Phase",n.innerText=l,r.innerText="Next Phase";const u=d.indexOf(l);switch(o.innerText=7!==u?d[u+1]:d[0],l){case"New":a.src="images/moons/new_moon.png";break;case"Waxing Crescent":case"Waning Crescent":a.src="images/moons/waxing_crescent.png";break;case"First Quarter":a.src="images/moons/first_quarter.png";break;case"Waxing Gibbous":a.src="images/moons/waxing_gibbous.png";break;case"Full":a.src="images/moons/Full_moon.png";break;case"Waning Gibbous":a.src="images/moons/waning_gibbous.png";break;case"Last Quarter":a.src="images/moons/last_quarter.png"}n.style.fontSize="60px",o.style.fontSize="60px",n.style.fontStyle="italic",n.style.border="5px solid black",n.style.borderRadius="20px",n.style.background="black",n.style.color="white",n.style.boxShadow="0px 0px 60px 20px rgba(255, 255, 255, 0.4) ",n.style.textShadow="1px 1px 10px white ",o.style.fontStyle="italic",o.style.border="10px solid white",o.style.borderRadius="20px",o.style.background="white",o.style.color="black",o.style.boxShadow="0px 0px 60px 20px rgba(255, 255, 255, 0.4) ",o.style.textShadow="1px 1px 5px black ",o.style.width="80%",a.style.width="350",a.style.height="350",a.style.zIndex="10",c.append(t),c.append(n),i.append(r),i.append(o),s.append(a)}(e)})),o.addEventListener("click",(function(){t.classList.add("hidden"),n.classList.add("hidden"),d.classList.add("hidden"),s.innerHTML=""}))}const l="4P48W2KCWFQAQ6SJ99K5H2VBM",u=Math.floor(Date.now()/1e3);async function p(e){try{const t=await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${e}/${u}?key=${l}`);if(!t.ok)throw t;{const e=await t.json();n(e),o(e,200,10,"5px","black","#sun-path"),a(e,450,"30px","black","#moons"),c(e,600,40,"20px","black","#seasons"),s(e),d(e),i(e),r(e),function e(){let t=new Date,n=t.getHours(),r=t.getMinutes(),o=t.getSeconds();n=n<10?"0"+n:n,r=r<10?"0"+r:r,o=o<10?"0"+o:o;let s=n+":"+r+":"+o;document.querySelector("#clock").innerText=s,setTimeout((function(){e()}),1e3)}(),console.log(e)}}catch(e){console.error(e)}}async function m(e,t,u){try{const p=await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${e}/${t}T${u}?key=${l}&include=current`);if(!p.ok)throw p;{const e=await p.json();n(e),o(e,200,10,"5px","black","#sun-path"),a(e,450,"30px","black","#moons"),c(e,600,40,"20px","black","#seasons"),s(e),d(e),i(e),r(e),function(e){let t,n=e.currentConditions.datetime;t=(n="9:00:00")?"9:00 AM":"9:00 PM",document.querySelector("#location").appendChild(document.createElement("br")),document.querySelector("#location").append(t)}(e),console.log(e)}}catch(e){console.error(e)}}function f(){let e=document.querySelector("#sun-path"),t=document.querySelector("#moons"),n=document.querySelector("#seasons"),r=document.querySelector("#location");e.innerHTML="",t.innerHTML="",n.innerHTML="",r.innerHTML=""}document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelector(".intro-modal"),t=document.querySelector("#start"),n=document.querySelector(".overlay");t.addEventListener("click",(function(){e.classList.add("hidden"),n.classList.add("hidden")})),t.addEventListener("click",(function(){p(document.querySelector("#zipcode").value)}))}(),function(){const e=document.querySelector(".intro-modal"),t=document.querySelector(".overlay"),n=document.querySelector("#date-button"),r=document.createElement("div");r.setAttribute("id","selectContainer");const o=document.createElement("button");o.setAttribute("id","enterInputs"),o.innerText="→";const s=document.createElement("button");function c(){r.innerHTML="",e.innerHTML="",e.classList.add("hidden"),t.classList.add("hidden")}s.setAttribute("id","closeSelect"),s.innerText="←",s.style.width="100px",n.addEventListener("click",(function(){e.innerHTML="",e.classList.remove("hidden"),t.classList.remove("hidden"),function(){const e=document.createElement("input");e.setAttribute("type","date"),e.setAttribute("id","input-date");let t=new Date;t=t.toISOString().slice(0,10),e.max=t;const n=document.createElement("div");n.setAttribute("id","dayNight");const c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("id","dayRadio"),c.value="Day",c.name="timeofDay";const i=document.createElement("label");i.setAttribute("for","dayRadio"),i.innerText="Day";const a=document.createElement("input");a.setAttribute("type","radio"),a.setAttribute("id","nightRadio"),a.name="timeofDay",a.value="Night";const d=document.createElement("label");d.setAttribute("for","nightRadio"),d.innerText="Night",n.append(i,c,d,a);const l=document.createElement("input");l.setAttribute("type","number"),l.setAttribute("id","selectZip"),l.placeholder="ZIP code",r.append(l,e,n,o,s)}(),e.append(r),night.reset(),day.reset(),selectDate.reset(),enterZip.reset()})),s.addEventListener("click",c),o.addEventListener("click",(function(){let e=document.querySelector("#selectZip").value,t=document.querySelector("#input-date").value,n=document.querySelector("#dayRadio").checked,r=document.querySelector("#nightRadio").checked,o=(document.querySelector("#sun-path"),document.querySelector("#moons"),document.querySelector("#seasons"),new Date);o=o.toISOString().slice(0,10),selectDate.max=o,o===t?(f(),p(e)):r?(f(),m(e,t,"18:00:00")):(f(),m(e,t,"09:00:00")),console.log(e),console.log(t),console.log(n),console.log(r)})),o.addEventListener("click",c)}()}))}()}();
//# sourceMappingURL=main.js.map