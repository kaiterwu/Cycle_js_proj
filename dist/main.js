!function(){"use strict";!function(){function e(e){return 60*parseInt(e.slice(0,2))*60+60*parseInt(e.slice(3,5))+parseInt(e.slice(6))}function t(e){let t=parseInt(e.slice(0,4)),n=parseInt(e.slice(5,7)),s=parseInt(e.slice(8));return 12===n?s:1===n?31+s:t%4==0?[31,60,91,121,152,182,213,244,274,305,336,366][n-2]+s+31:[31,59,90,120,151,181,212,243,273,304,334,365][n-2]+s+31}function n(e){let t=e.days[0].datetime;document.querySelector("#date").innerText=t}function s(e){let t=e.timezone.split("/"),n=e.resolvedAddress.split(",")[0],s=t[1].split("_").join(" "),r=e.resolvedAddress.split(",")[1]+"\n"+s+"\n"+n;document.querySelector("#location").append(r)}function r(t,n,s,r,o,c){const i=n,a=n,d=Math.min(i,a)/2-20,l=d3.select(c).append("svg").attr("width",i).attr("height",a).append("g").attr("transform",`translate(${i/2},${a/2})`);let u=e(t.currentConditions.datetime),p=e(t.currentConditions.sunrise),m=e(t.currentConditions.sunset);const f=86400;let y=function(e,t,n){return e>n?f-e+t:e<t?t-e:f-n+t}(u,p,m),x=function(e,t,n){return e>t&&e<n?n-e:0}(u,p,m),g=function(e,t,n){return e>t?e-t:e<n?f+e-t:void 0}(u,p,m);const h={elapse:g,day:x,night:y},b=d3.scaleOrdinal().range(["#000000","#ff0660","#416fec"]),S=d3.pie().value((e=>e[1])).sort(null),v=d3.arc().innerRadius(d-s).outerRadius(d),k=S(Object.entries(h));l.selectAll("path").data(k).join("path").transition().duration(2e3).attrTween("d",(function(e){let t=d3.interpolate(e.startAngle+.1,e.endAngle);return function(n){return e.endAngle=t(n),v(e)}})).style("fill",(e=>b(e.data[0]))).attr("stroke",o).style("stroke-width",r).style("opacity",1)}function o(t){let n=e(t.currentConditions.datetime),s=(e(t.currentConditions.sunrise),e(t.currentConditions.sunset));const o=document.querySelector(".astro-modal"),c=document.querySelector(".overlay"),i=document.querySelector("#sun-path>svg"),a=document.querySelector(".close-btn"),d=document.querySelector("#svg-container"),l=document.querySelector("#upper-text"),u=document.querySelector("#lower-text");i.addEventListener("click",(function(){o.classList.remove("hidden"),c.classList.remove("hidden")})),i.addEventListener("click",(function(){r(t,600,30,"5px","white","#svg-container"),function(e){const t=document.createElement("p"),r=document.createElement("h1"),o=document.createElement("p"),c=document.createElement("h1"),i=document.createElement("img");t.innerText="Sunrise was at",r.innerText=`${e.currentConditions.sunrise}`,r.style.color="black",r.style.border="5px solid #ff0660",r.style.borderRadius="20px",r.style.background="#ff0660",r.style.boxShadow="0px 0px 20px 20px #ff0660",r.style.textShadow="1px 1px 5px black",l.append(t),l.append(r),n>s?(o.innerText="Sunset was at",i.src="images/days/moon.png"):(o.innerText="Sunset is at",i.src="images/days/sun2.png"),c.innerText=`${e.currentConditions.sunset}`,c.style.color="#416fec",c.style.border="5px solid #416fec",c.style.borderRadius="20px",c.style.background="black",c.style.boxShadow="0px 0px 20px 20px #416fec",c.style.textShadow="1px 1px 10px #416fec",u.append(o),u.append(c),d.append(i)}(t)})),a.addEventListener("click",(function(){o.classList.add("hidden"),c.classList.add("hidden"),d.innerHTML="",l.innerHTML="",u.innerHTML=""}))}function c(e,n,s,r,o,c){const i=n,a=n,d=Math.min(i,a)/2-20,l=d3.select(c).append("svg").attr("width",i).attr("height",a).append("g").attr("transform",`translate(${i/2},${a/2})`);let u=t(e.days[0].datetime);parseInt(e.days[0].datetime.slice(0,4));const p={current:u,winter:function(e){return e>90?0:90-e}(u),spring:function(e){return e>182?0:e>90?182-e:92}(u),summer:function(e){return e>273?0:e>182?273-e:92}(u),fall:function(e){return e>273?365-e:91}(u)},m=d3.scaleOrdinal().range(["#000000","#99ffe6","#065535","#fff228","#f77c3f"]),f=d3.pie().value((e=>e[1])).sort(null),y=d3.arc().innerRadius(d-s).outerRadius(d),x=f(Object.entries(p));l.selectAll("path").data(x).join("path").transition().duration(2e3).attrTween("d",(function(e){let t=d3.interpolate(e.startAngle+.1,e.endAngle);return function(n){return e.endAngle=t(n),y(e)}})).style("fill",(e=>m(e.data[0]))).attr("stroke",o).style("stroke-width",r).style("opacity",1)}function i(e){const n=document.querySelector(".astro-modal"),s=document.querySelector(".overlay"),r=document.querySelector("#seasons>svg"),o=document.querySelector(".close-btn"),i=document.querySelector("#svg-container"),a=document.querySelector("#upper-text"),d=document.querySelector("#lower-text");r.addEventListener("click",(function(){n.classList.remove("hidden"),s.classList.remove("hidden")})),r.addEventListener("click",(function(){c(e,600,40,"5px","white","#svg-container"),function(e){const n=document.createElement("p"),s=document.createElement("h1"),r=document.createElement("p"),o=document.createElement("h1"),c=document.createElement("img");let l,u,p,m,f,y,x=t(e.days[0].datetime);x<=90?(l=x,u=90-x,p="Winter",m="Spring",c.src="images/seasons/winter.png"):x>90&&x<=181?(l=x-90,u=181-x,p="Spring",m="Summer",c.src="images/seasons/spring.png"):x>182&&x<=273?(l=x-182,u=273-x,p="Summer",m="Fall",c.src="images/seasons/summer.png"):(l=x-274,u=365-x,console.log(l),console.log(x),p="Fall",m="Winter",c.src="images/seasons/autumn.png"),n.innerText=`${l} day(s) into `,r.innerText=`${u} day(s) until`,s.innerText=`${p}`,o.innerText=`${m}`,"Winter"===p?(f="#99ffe6",y="#065535"):"Spring"===p?(f="#065535",y="#fff228"):"Summer"===p?(f="#fff228",y="#f77c3f"):(f="#f77c3f",y="#99ffe6"),s.style.color=f,s.style.border=`5px solid ${f}`,s.style.borderRadius="20px",s.style.background="black",s.style.boxShadow=`0px 0px 30px 10px ${f} `,s.style.padding="10px",s.style.textShadow=`1px 1px 5px ${f} `,o.style.border=`10px solid ${y}`,o.style.borderRadius="20px",o.style.background=y,o.style.color="black",o.style.boxShadow=`0px 0px 30px 10px ${y} `,o.style.padding="10px",o.style.textShadow="1px 1px 5px black ",c.style.width="350px",c.style.height="350px",a.append(n),a.append(s),d.append(r),d.append(o),i.append(c)}(e)})),o.addEventListener("click",(function(){n.classList.add("hidden"),s.classList.add("hidden"),i.innerHTML=""}))}function a(e,t,n,s,r){const o=t,c=t,i=Math.min(o,c)/2-20,a=d3.select(r).append("svg").attr("width",o).attr("height",c).append("g").attr("transform",`translate(${o/2},${c/2})`),d=d3.scaleOrdinal().range(function(e){let t=["#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"];const n=e.currentConditions.moonphase;return n<.125||1===n?t.splice(0,0,"#000000"):n>=.125&&n<.25?t.splice(1,0,"#000000"):n>=.25&&n<.375?t.splice(2,0,"#000000"):n>=.375&&n<.5?t.splice(3,0,"#000000"):n>=.5&&n<.625?t.splice(4,0,"#000000"):n>=.625&&n<.75?t.splice(5,0,"#000000"):n>=.75&&n<.875?t.splice(6,0,"#000000"):n>=.875&&n<1?t.splice(7,0,"#000000"):t.splice(0,0,"#000000"),t}(e)),l=d3.pie().value((e=>e[1])).sort(null),u=d3.arc().innerRadius(i-80).outerRadius(i),p=l(Object.entries({"🌑":8,"🌒":8,"🌓":8,"🌔":8,"🌕":8,"🌖":8,"🌗":8,"🌘":8}));a.selectAll("slice").data(p).join("path").attr("d",u).transition().delay((function(e,t){return t/8*1e3})).duration(1e3).style("fill",(e=>d(e.data[0]))).attr("stroke",s).style("stroke-width",n).style("opacity",1),a.selectAll("slices").data(p).join("text").text((function(e){return e.data[0]})).transition().duration(2e3).attr("transform",(function(e){return`translate(${u.centroid(e)})`})).style("text-anchor","middle")}function d(e){const t=document.querySelector(".astro-modal"),n=document.querySelector(".overlay"),s=document.querySelector("#moons>svg"),r=document.querySelector(".close-btn"),o=document.querySelector("#svg-container"),c=document.querySelector("#upper-text"),i=document.querySelector("#lower-text"),d=document.querySelector(".moon_background");s.addEventListener("click",(function(){t.classList.remove("hidden"),n.classList.remove("hidden"),d.classList.remove("hidden")})),s.addEventListener("click",(function(){a(e,600,"30px","black","#svg-container"),function(e){const t=document.createElement("p"),n=document.createElement("h1"),s=document.createElement("p"),r=document.createElement("h1"),a=document.createElement("img"),d=["New","Waxing Crescent","First Quarter","Waxing Gibbous","Full","Waning Gibbous","Last Quarter","Waning Crescent"],l=function(e){const t=e.currentConditions.moonphase;let n;return n=t<.125||1===t?"New":t>=.125&&t<.25?"Waxing Crescent":t>=.25&&t<.375?"First Quarter":t>=.375&&t<.5?"Waxing Gibbous":t>=.5&&t<.625?"Full":t>=.625&&t<.75?"Waning Gibbous":t>=.75&&t<.875?"Last Quarter":t>=.875&&t<1?"Waning Crescent":"New",n}(e);t.innerText="Current Phase",n.innerText=l,s.innerText="Next Phase";const u=d.indexOf(l);switch(r.innerText=7!==u?d[u+1]:d[0],l){case"New":a.src="images/moons/new_moon.png";break;case"Waxing Crescent":case"Waning Crescent":a.src="images/moons/waxing_crescent.png";break;case"First Quarter":a.src="images/moons/first_quarter.png";break;case"Waxing Gibbous":a.src="images/moons/waxing_gibbous.png";break;case"Full":a.src="images/moons/Full_moon.png";break;case"Waning Gibbous":a.src="images/moons/waning_gibbous.png";break;case"Last Quarter":a.src="images/moons/last_quarter.png"}n.style.fontSize="60px",r.style.fontSize="60px",n.style.fontStyle="italic",n.style.border="5px solid black",n.style.borderRadius="20px",n.style.background="black",n.style.color="white",n.style.boxShadow="0px 0px 60px 20px rgba(255, 255, 255, 0.4) ",n.style.textShadow="1px 1px 10px white ",r.style.fontStyle="italic",r.style.border="10px solid white",r.style.borderRadius="20px",r.style.background="white",r.style.color="black",r.style.boxShadow="0px 0px 60px 20px rgba(255, 255, 255, 0.4) ",r.style.textShadow="1px 1px 5px black ",r.style.width="80%",a.style.width="350",a.style.height="350",a.style.zIndex="10",c.append(t),c.append(n),i.append(s),i.append(r),o.append(a)}(e)})),r.addEventListener("click",(function(){t.classList.add("hidden"),n.classList.add("hidden"),d.classList.add("hidden"),o.innerHTML=""}))}const l="4P48W2KCWFQAQ6SJ99K5H2VBM",u=Math.floor(Date.now()/1e3);async function p(e){try{const t=await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${e}/${u}?key=${l}`);if(!t.ok)throw t;{const e=await t.json();n(e),r(e,200,10,"5px","black","#sun-path"),a(e,450,"30px","black","#moons"),c(e,600,40,"20px","black","#seasons"),o(e),d(e),i(e),s(e),function e(){let t=new Date,n=t.getHours(),s=t.getMinutes(),r=t.getSeconds();n=n<10?"0"+n:n,s=s<10?"0"+s:s,r=r<10?"0"+r:r;let o=n+":"+s+":"+r;document.querySelector("#clock").innerText=o,setTimeout((function(){e()}),1e3)}(),console.log(e)}}catch(e){console.error(e)}}async function m(e,t,u){try{const p=await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${e}/${t}T${u}?key=${l}&include=current`);if(!p.ok)throw p;{const e=await p.json();n(e),r(e,200,10,"5px","black","#sun-path"),a(e,450,"30px","black","#moons"),c(e,600,40,"20px","black","#seasons"),o(e),d(e),i(e),s(e),console.log(e)}}catch(e){console.error(e)}}function f(){let e=document.querySelector("#sun-path"),t=document.querySelector("#moons"),n=document.querySelector("#seasons"),s=document.querySelector("#location");e.innerHTML="",t.innerHTML="",n.innerHTML="",s.innerHTML=""}document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelector(".intro-modal"),t=document.querySelector("#start"),n=document.querySelector(".overlay");t.addEventListener("click",(function(){e.classList.add("hidden"),n.classList.add("hidden")})),t.addEventListener("click",(function(){p(document.querySelector("#zipcode").value)}))}(),function(){const e=document.querySelector(".intro-modal"),t=document.querySelector(".overlay"),n=document.querySelector("#date-button"),s=document.createElement("div");s.setAttribute("id","selectContainer");const r=document.createElement("button");r.setAttribute("id","enterInputs"),r.innerText="→";const o=document.createElement("input");o.setAttribute("type","date"),o.setAttribute("id","input-date");const c=document.createElement("button");function i(){s.innerHTML="",e.innerHTML="",e.classList.add("hidden"),t.classList.add("hidden")}c.setAttribute("id","closeSelect"),c.innerText="←",c.style.width="100px",n.addEventListener("click",(function(){e.innerHTML="",e.classList.remove("hidden"),t.classList.remove("hidden"),function(){const e=document.createElement("div");e.setAttribute("id","dayNight");const t=document.createElement("input");t.setAttribute("type","radio"),t.setAttribute("id","dayRadio"),t.value="Day",t.name="timeofDay";const n=document.createElement("label");n.setAttribute("for","dayRadio"),n.innerText="Day";const i=document.createElement("input");i.setAttribute("type","radio"),i.setAttribute("id","nightRadio"),i.name="timeofDay",i.value="Night";const a=document.createElement("label");a.setAttribute("for","nightRadio"),a.innerText="Night",e.append(n,t,a,i);const d=document.createElement("input");d.setAttribute("type","number"),d.setAttribute("id","selectZip"),d.placeholder="ZIP code",s.append(d,o,e,r,c)}(),e.append(s)})),c.addEventListener("click",i),r.addEventListener("click",(function(){let e=document.querySelector("#selectZip").value,t=document.querySelector("#input-date").value,n=document.querySelector("#dayRadio").checked,s=document.querySelector("#nightRadio").checked,r=(document.querySelector("#sun-path"),document.querySelector("#moons"),document.querySelector("#seasons"),new Date);r=r.toISOString().slice(0,10),r===t?(f(),p(e)):s?(f(),m(e,t,"18:00:00")):(f(),m(e,t,"09:00:00")),console.log(e),console.log(t),console.log(n),console.log(s)})),r.addEventListener("click",i)}()}))}()}();
//# sourceMappingURL=main.js.map